{
    "SchemaVersion": "1.0.0",
    "Id": "44ff1e0c-58e2-4a11-9fa0-1a29b3ebe564",
    "Version": "0.0.1",
    "Name": "Chiller",
    "Description": "Simulated Chiller with temperature and humidity sensors",
    "Protocol": "AMQP",
    "DeviceBehavior": {
        "get_random_temperature": {
            "Type": "javascript",
            "Path": "random-temperature-celsius-sensor.js"
        },
        "get_random_percentage": {
            "Type": "javascript",
            "Path": "random-percentage-sensor.js"
        },
        "get_power_source": {
            "Type": "javascript",
            "Path": "chiller-power-sensors.js"
        },
        "do_reboot": {
            "Type": "javascript",
            "Path": "chiller-reboot-method.js"
        },
        "do_upgrade": {
            "Type": "javascript",
            "Path": "chiller-upgrade-method.js"
        }
    },
    "Telemetry": {
        "Messages": [
            {
                "Interval": "00:00:15",
                "Message":
                    "{\"temperature\": ${get_random_temperature.value},\"t_unit\":\"C\",\"humidity\": ${get_random_percentage.value},\"h_unit\":\"%\",\"voltage\": ${get_power_source.voltage},\"v_unit\":\"${get_power_source.voltage_unit}\",\"power\": ${get_power_source.power},\"p_unit\":\"${get_power_source.power_unit}\"}",
                "MessageSchema": {
                    "Name": "chiller;v1",
                    "Format": "JSON",
                    "Fields": {
                        "temperature": "double",
                        "humidity": "integer",
                        "voltage": "double",
                        "power": "double",
                        "t_unit": "text",
                        "h_unit": "text",
                        "v_unit": "text",
                        "p_unit": "text"
                    }
                }
            }
        ]
    },
    "CloudToDeviceMethods": {
        "Reboot": {
            "Actions": [
                "${do_reboot}"
            ]
        },
        "Upgrade": {
            "Actions": [
                "${do_reboot}",
                "${do_upgrade}",
                "${do_reboot}"
            ]
        }
    }
}
