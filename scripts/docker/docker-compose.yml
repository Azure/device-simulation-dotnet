# Usage:
# - install Docker Compose, see https://docs.docker.com/compose/install
# - open a console and `cd` into the folder that contains this file
# - run `docker-compose up`

version: "3"

services:
  iothubmanager:
    image: azureiotpcs/iothubmanager-dotnet:latest
    ports:
      - "9002:9002"
    environment:
      - PCS_IOTHUBMANAGER_WEBSERVICE_PORT=9002
      - PCS_IOTHUB_CONN_STRING
  devicesimulation:
    image: azureiotpcs/device-simulation-dotnet:latest
    depends_on:
      - iothubmanager
    ports:
      - "9003:9003"
    environment:
      - PCS_DEVICESIMULATION_WEBSERVICE_PORT=9003
      - PCS_IOTHUBMANAGER_WEBSERVICE_URL=http://iothubmanager:9002/v1
    volumes:
      - ./sample-volume:/app/data:ro
